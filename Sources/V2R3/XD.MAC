STEP	EQU	22*2
HSTEP	EQU	STEP/2
;	
IDCODE	EQU	0	
SCRAL	EQU	1	
SCRAH	EQU	2	
SUBAL	EQU	3	
SUBAH	EQU	4	
YPOS	EQU	5	
XPOS	EQU	6	
SYPOS	EQU	7	
SXPOS	EQU	8	
DX	EQU	9	
DY	EQU	10	
REPCON	EQU	11	
PATAL	EQU	12	
PATAH	EQU	13	
SMOKAL	EQU	14	
SMOKAH	EQU	15	
ENERGL	EQU	16
ENERGH	EQU	17
MSLSL	EQU	18
MSLSH	EQU	19
MODEF	EQU	20
KILLF	EQU	21
U	6	
SYPOS	EQU	7	
SXPOS	EQU	8	
DX	EQU	9	
DY	EQU	10	
REPCON	EQU	11	
PATAL	EQU	12	
PATAH	EQU	13	
SMOKAL	EQU	14	
SMOKAH	EQXT	PTSHP1,PTSHP2
	EXT	PTSMR,PTSML,PTSMU,PTSMD
	EXT	PTSMRU,PTSMLU,PTSMLD,PTSMRD
	EXT	PTSKR,PTSKL,PTSKU,PTSKD
	EXT	PTSKRU,PTSKLU,PTSKLD,PTSKRD
	EXT	PTBMP,PTBM4,PTBM5
	EXT	PTBM6,PTBM7,PTBMK1,CGADR
	EXT	KIRDS,KIRCL,BASEDS,BASECL
	EXT	INTDS,INTCL,DSTDS,DSTCL
	EXT	CRSDS,CRSCL,BTLDS,BTLCL
;
FALSE	EQU	0
TRUE	EQU	NOT FALSE
;HARD WARE TYPE
PC8001	EQU	FALSE
PC8801	EQU	TRUE
KOM980	EQU	FALSE
;SOFTWARE MODE
NBASIC	EQU	FALSE
CPM	EQU	TRUE
;
	IF	PC8001
BANK	EQU	0E7H
ROM	EQU	0
RAM	EQU	1
	ENDIF
;
	IF	PC8801
BANK	EQU	31H
ROM	EQU	4
RAM	EQU	6
	ENDIF
;
	IF	KOM980
BANK	EQU	78H
ROM	EQU	0
RAM	EQU	80H
	ENDIF
;
	IF	NBASIC
REBOOT	MACRO
	ROMSUB	81H
	ENDM
VRAM2	EQU	0C000H
	ENDIF
;
	IF	CPM
REBOOT	MACRO
	JP	0
	ENDM
VRAM2	EQU	08000H
	ENDIF
;
ROMSUB	MACRO	A
	CALL	ROMCAL
	DEFW	A
	ENDM
;
STEP	EQU	64
HSTEP	EQU	STEP/2
;	
IDCODE	EQU	0	
SCRAL	EQU	1	
SCRAH	EQU	2	
SUBAL	EQU	3	
SUBAH	EQU	4	
YPOS	EQU	5	
XPOS	EQU	6	
SYPOS	EQU	7	
SXPOS	EQU	8	
DX	EQU	9	
DY	EQU	10	
REPCON	EQU	11	
PATAL	EQU	12	
PATAH	EQU	13	
SMOKAL	EQU	14	
SMOKAH	EQU	15	
ENERGL	EQU	16
ENERGH	EQU	17
MSLSL	EQU	18
MSLSH	EQU	19
MIDOF	EQU	20
KILLF	EQU	21
;
;
;MEMORY MAP DEFINISION
VRAM1	EQU	0F300H
XNUM	EQU	80
VRMSIZ	EQU	120*25
SUBSIZ	EQU	64*48
SUBSCR	EQU	VRAM2-SUBSIZ
XTBL	EQU	SUBSCR-STEP*XNUM
KEYBUF	EQU	XTBL-10
;
RMCWK	EQU	VRAM2+VRMSIZ
STACK	EQU	RMCWK+300
;
;
SYSINI:	IF	KOM980
	LD	A,0FFH
	OUT	(079H),A
	ENDIF
	JP	START
;
INIGRS:
	RET
;
INIBPT:
	XOR	A	
	LD	(BACKP1),A	
	LD	(BACKP2),A	
;
	LD	